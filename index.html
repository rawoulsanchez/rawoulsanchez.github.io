
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Rawoul — Starter</title>
<style>
  /* Design tokens */
:root { --bg:#000; --fg:#eaeaf0; --muted:#9aa0a6; --accent:#7aa2ff; --nav-height:64px; --brand:#e31b23; }
  :root{
  --font-ui: "Inter", system-ui, -apple-system, Segoe UI, Roboto, Inter, Arial, sans-serif;
  --font-display: "Inter", system-ui, -apple-system, Segoe UI, Roboto, Inter, Arial, sans-serif;
}
  * { box-sizing:border-box; }
  body { margin:0; font-family:var(--font-ui); background:var(--bg); color:var(--fg); line-height:1.5; overflow-x:hidden; -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale; }

  /* Fixed black nav */
.nav-bar{
  position:fixed;
  top:0;
  left:0;
  right:0;
  z-index:100;
  background:#000;
  height:calc(var(--nav-height) + env(safe-area-inset-top));
  box-shadow:none;
border-bottom:0;
}

/* Content sits below the notch area */
.nav-inner {
  max-width:960px;
  margin:0 auto;
  height:var(--nav-height);
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:env(safe-area-inset-top) 16px 0 16px; /* <-- moved from .nav-bar */
}
.brand {
    color:var(--brand);
    font-weight:800;
    font-size:24px;
    letter-spacing:.2px;
    text-decoration:none;
}
  .nav-actions {
    display:flex;
    gap:12px;
    align-items:center;
  }
  .icon-btn {
    position:relative;
    display:inline-grid;
    place-items:center;
    width:36px;
    height:36px;
    border-radius:999px;
    background:#121212;
    border:1px solid #222;
    cursor:pointer;
    color:#eaeaf0;
  }
  .icon-btn:hover { background:#161616; }
  .icon-btn svg { fill:currentColor; }
.icon-btn .dot {
    position:absolute;
    top:4px;
    right:4px;
    width:9px;
    height:9px;
    background:var(--brand);
    border-radius:999px;
    box-shadow:0 0 0 2px #000;
}
  .title-chip{
  display:inline-flex; align-items:center; justify-content:center;
  padding:.5rem .875rem;
  background:rgba(17,17,17,.85);
  border-radius:.75rem;
  /* keep same visual weight and red border using token */
  box-shadow:
    0 6px 20px rgba(0,0,0,.45),
    inset 0 0 0 2px color-mix(in srgb, var(--brand) 65%, transparent);
  margin-bottom:.5rem;         /* preserves your current spacing */
}
.title-chip-text{
  font-family: var(--font-display);
  font-weight:800;
  letter-spacing:.08em;
  color:#fff;
  font-size:clamp(1rem,2.6vw,1.35rem);
}

/* Optional responsive tweak, mirrors your sample without Tailwind */
@media (max-width:768px){
  .title-chip{ padding:.4rem .75rem; }
  .title-chip-text{ letter-spacing:.09em; }
}
@media (min-width:768px){
  .title-chip-text{ font-size:1.35rem; } /* matches clamp’s max */
}

/* Layout helpers used by the page */
/* Keep hero flush under fixed nav (hide the 1px inset line) */
main{
  /* 1px upward overlap to kill rounding sliver on DPR 2/3 */
  padding-top: calc(var(--nav-height) + env(safe-area-inset-top) - 1px);
}
.wrap {
  max-width:960px;
  margin:0 auto;
  padding:16px;
}
/* REMOVED .wrap--flush to simplify structure. The horizontal gap fix requires this. */
.card {
  background:#14161c;
  border:1px solid #222;
  border-radius:12px;
  padding:16px;
  margin:16px;
}
  footer {
    color:var(--muted);
    text-align:center;
    padding:24px;
    border-top:1px solid #222;
  }
  button.cta {
    background:var(--accent);
    color:#0b1020;
    border:0;
    padding:10px 14px;
    border-radius:10px;
    font-weight:600;
    cursor:pointer;
  }
  button.cta:focus {
    outline:2px solid #fff4;
    outline-offset:2px;
  }
  h1 { font-size:clamp(28px,4vw,40px); margin:0 0 8px; }
  h2 { font-size:clamp(18px,4.5vw,24px); margin:12px 0 8px; }
  p  { margin:8px 0; color:var(--muted); }

/* HERO */
.hero{
  position:relative;
  height:auto;
  aspect-ratio:16 / 9;
  overflow:hidden;             /* crops the overfill from the iframe */
  background:#000;
  width:170vw;
  left:50%;
  transform: translateX(-50%);
  z-index:1;
  margin-top:-2px;             /* touch the nav */
  border-top:0;
}

.hero-video { position:absolute; inset:0; }

/* Cover + crop bottom WITHOUT clip-path */
.hero-video iframe{
  position:absolute;
  inset:0;
  width:170vw;
  height:112%;                 /* overfill vertically */
  left:50%;
  transform:translate(-50%, -6%); /* shift up to crop bottom */
  border:0;
}

/* Black spacer under the hero - NOW RESPONSIBLE FOR FULL WIDTH COVERAGE */
.after-hero{
  min-height:0; /* reduced to remove large gap below Row A */
  background:#000;
  border:0;
  margin:0;
  border-radius:0;
  padding:0; /* Ensure no padding on the .after-hero so the black background is full width */
  margin-top:0; /* pull pills closer to synopsis */
}

/* New wrapper to correctly apply padding and center content within the full-width black section */
.content-pad {
  max-width:960px;
  margin:0 auto;
  /* Apply responsive padding only to the content wrapper */
  padding: 0 calc(16px + env(safe-area-inset-right)) 16px calc(16px + env(safe-area-inset-left));
}


/* Hero gradient: bottom → top, covers full hero */
.hero-gradient{
  position:absolute;
  inset:0;                    /* cover full hero box */
  z-index:1;                  /* video (0) < gradient (1) < overlay (2) */
  pointer-events:none;
  transform:translateZ(0);
  backface-visibility:hidden;
  background:linear-gradient(
    to top,
    rgba(0,0,0,0.88) 0%,
    rgba(0,0,0,0.76) 10%,
    rgba(0,0,0,0.60) 22%,
    rgba(0,0,0,0.42) 36%,
    rgba(0,0,0,0.26) 52%,
    rgba(0,0,0,0.14) 68%,
    rgba(0,0,0,0.00) 100%
  );
}

@media (max-width:600px){
  .hero-gradient{
    background:linear-gradient(
      to top,
      rgba(0,0,0,0.92) 0%,
      rgba(0,0,0,0.80) 12%,
      rgba(0,0,0,0.64) 26%,
      rgba(0,0,0,0.46) 40%,
      rgba(0,0,0,0.28) 56%,
      rgba(0,0,0,0.14) 72%,
      rgba(0,0,0,0.00) 100%
    );
  }
}

.hero-text {
  padding:64px 0;
  display:grid;
  gap:16px;
}
@media (max-width:600px) {
  .hero-text { padding:48px 0; }
}

  /* Apply drop shadow to all overlay text */
.hero-overlay-inline,
.hero-overlay-inline * {
  text-shadow: 0 1px 3px rgba(0,0,0,0.70);
}

/* Stronger shadow for the synopsis for readability */
.hero-overlay-inline .hero-synopsis {
  text-shadow: 0 2px 6px rgba(0,0,0,0.85);
}

/* Mute button */
  .mute-btn {
    position:absolute;
    right:12px;
    bottom:12px;
    width:40px;
    height:40px;
    border-radius:999px;
    border:1px solid #222;
    background:#121212;
    color:#eaeaf0;
    display:grid;
    place-items:center;
    font-size:18px;
    cursor:pointer;
  }
  .mute-btn:focus {
    outline:2px solid #fff4;
    outline-offset:2px;
  }
  /* commit: no-horizontal-scroll */
html { overflow-x: hidden; }
/* CTA row under the hero video */
.hero-cta{
  display:grid;
  grid-template-columns: 1fr 1fr;   /* always two columns */
  gap:8px;
  width:100%;
  max-width:340px;                   /* keep pills on one line */
  margin: calc(8px + .125rem) 0 0 0; /* FIXED gap below synopsis */
}

/* Smaller buttons */
.btn{
  appearance:none; border:0; cursor:pointer;
  display:inline-flex; align-items:center; justify-content:center;
  gap:.35rem; padding:.42rem .56rem; border-radius:999px; /* same height, narrower */
  font:700 .80rem/1 var(--font-ui);
  transition:transform .12s ease, opacity .12s ease, box-shadow .12s ease, background .12s ease;
  width:100%;
  box-shadow: 0 6px 14px rgba(0,0,0,.18);
}
.btn:focus{ outline:2px solid #ffffff33; outline-offset:2px; }
.btn:active{ transform: translateY(1px); }

.btn--solid{ background:#fff; color:#000; }
.btn--solid:hover{ background:#e6e6e6; }

.btn--ghost{
  background: rgba(255,255,255,0.10); color:#fff;
  box-shadow: inset 0 0 0 1.1px rgba(255,255,255,0.28);
}
.btn--ghost:hover{ box-shadow: inset 0 0 0 1.1px rgba(255,255,255,0.5); }

/* Smaller icons */
.btn svg{ width:14px; height:14px; display:block; } /* matches reduced height */
.btn--solid:hover{ background:#e6e6e6; }

.btn--ghost{
  background: rgba(255,255,255,0.10); color:#fff;
  box-shadow: inset 0 0 0 1.25px rgba(255,255,255,0.28);
}
.btn--ghost:hover{ box-shadow: inset 0 0 0 1.25px rgba(255,255,255,0.5); }

/* Smaller icons */
.btn svg{ width:16px; height:16px; display:block; }

/* REMOVED: ALWAYS-ON GAP CHECK BACKGROUND */
/* =============================
   Shelves (Rows A/B/C)
   ============================= */
:root{ --shelf-gap:8px; --shelf-radius:14px; }
.shelf{ margin:24px 0 32px; }
.shelf-title{ font:700 1rem/1.3 var(--font-ui); color:var(--fg); margin:0 0 6px; }
.shelf-divider{ height:2px; background:#3a3f46; opacity:.9; border-radius:2px; }
/* Full-bleed wrapper so the track can extend to viewport edges */
.shelf-outer{ position:relative; width:100vw; left:50%; transform:translateX(-50%); }
/* Edge fades (narrow 48px) */
.shelf-outer::before, .shelf-outer::after{
  content:""; position:absolute; top:0; bottom:0; width:48px; pointer-events:none; z-index:1;
}
.shelf-outer::before{ left:0; background:linear-gradient(to right, rgba(0,0,0,1), rgba(0,0,0,0)); }
.shelf-outer::after{ right:0; background:linear-gradient(to left, rgba(0,0,0,1), rgba(0,0,0,0)); }
/* Horizontal list of posters */
/* --- SHELF TRACK --- */
/* Add scroll-snapping and hide the scrollbar */
.shelf-track {
  display: grid;
  grid-auto-flow: column;
  gap: var(--shelf-gap);
  overflow-x: auto;
  overscroll-behavior-x: contain;
  -webkit-overflow-scrolling: touch;
  padding: 10px calc(16px + env(safe-area-inset-right)) 16px calc(16px + env(safe-area-inset-left));
  scroll-snap-type: x mandatory; /* Snap horizontally */
  scrollbar-width: none; /* Hide scrollbar for Firefox */
}
.shelf-track::-webkit-scrollbar {
  display: none; /* Hide scrollbar for Chrome, Safari, Opera */
}
.shelf-track[role="list"] { list-style: none; }

/* --- POSTER --- */
/* Add snap alignment, transitions, and a transform origin */
.poster {
  position: relative;
  display: block;
  background: #1e2228;
  border: 1px solid #2a2f36;
  border-radius: var(--shelf-radius);
  aspect-ratio: 2 / 3;
  width: calc((100vw - (16px * 2) - (var(--shelf-gap) * 2)) / 3); /* ~3.0 visible on mobile */
  scroll-snap-align: center; /* Snap posters to the center */
  transition: transform 0.35s cubic-bezier(0.25, 0.1, 0.25, 1);
  transform-origin: center center;
}

/* New class for the active/centered poster */
.poster.is-active {
  transform: scale(1.12); /* Increase size by 12% */
  border-color: #5a5f66;
}

/* Make the poster label visible and styled */
.poster::after {
  content: attr(data-label);
  position: absolute;
  inset: auto 0 10px 0; /* Center the text horizontally near the bottom */
  color: #fff;
  font: 700 1.25rem/1 var(--font-ui);
  text-align: center;
  text-shadow: 0 1px 3px rgba(0,0,0,0.8);
  opacity: 0.8;
  pointer-events: none; /* Ensure it doesn't interfere with clicks */
}
/* Desktop provisional */
@media (min-width:768px){ .poster{ width:140px; } }
/* Spacing tweaks */
.shelf--tight{ margin-top:8px; }
.content-pad--tight{ padding-bottom:8px; }
/* First shelf sits tighter under CTA */
.shelf--tight{ margin-top:8px; }
</style>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
</head>
<body>
  <header class="nav-bar" role="navigation" aria-label="Main">
    <div class="nav-inner">
      <a class="brand" href="/" aria-label="Home">SanchezNinjah</a>
      <div class="nav-actions">
        <button class="icon-btn" aria-label="Search">
          <svg width="22" height="22" viewBox="0 0 24 24" aria-hidden="true"><path d="M10.5 3a7.5 7.5 0 015.92 12.2l3.69 3.69-1.42 1.42-3.69-3.69A7.5 7.5 0 1110.5 3zm0 2a5.5 5.5 0 100 11 5.5 5.5 0 000-11z"/></svg>
        </button>
        <button class="icon-btn" aria-label="Notifications">
          <span class="dot" aria-hidden="true"></span>
          <svg width="22" height="22" viewBox="0 0 24 24" aria-hidden="true"><path d="M12 2a4 4 0 00-4 4v1.1C6.2 8 5 9.7 5 11.6V17l-1.5 1.5v1h17v-1L19 17v-5.4c0-1.9-1.2-3.6-3-4.5V6a4 4 0 00-4-4zm0 20a3 3 0 01-3-3h6a3 3 0 01-3 3z"/></svg>
        </button>
      </div>
    </div>
  </header>
  <main>
<section class="hero" id="hero">
  <div class="hero-video">
    <iframe
      id="hero-yt"
      title="Hero trailer"
      src="https://www.youtube.com/embed/VBdaOkpLe_o?start=12&autoplay=1&mute=1&controls=0&playsinline=1&loop=1&modestbranding=1&rel=0&enablejsapi=1&playlist=VBdaOkpLe_o"
      allow="autoplay; encrypted-media"
      allowfullscreen
    ></iframe>
  </div>

  <!-- Hero gradient: bottom → top -->
  <div class="hero-gradient" aria-hidden="true"></div>

  <!-- Overlay area locked to viewport edges -->
  <div class="hero-overlay-wrap"
       style="position:absolute;top:0;bottom:0;
              left:calc((100% - 100vw)/2);
              right:calc((100% - 100vw)/2);
              z-index:2;display:flex;flex-direction:column;
              justify-content:flex-end;pointer-events:none;overflow:hidden;">
    <div class="hero-overlay-inline"
         style="pointer-events:auto;position:absolute;bottom:0;left:0;
                max-width:720px;color:#fff;text-align:left;
                padding:12px calc(16px + env(safe-area-inset-right)) 0 calc(16px + env(safe-area-inset-left));
                text-shadow:0 1px 3px rgba(0,0,0,.5);
                background:transparent;border-radius:12px 12px 0 0;">
<div class="title-chip" role="heading" aria-level="1">
  <span class="title-chip-text">Sanchez Ninjah</span>
</div>

<p id="meta-line" style="margin:0 0 .14rem;color:var(--brand);
                font-size:clamp(.78rem,1.6vw,.95rem);
                font-weight:700;letter-spacing:.08em;text-transform:uppercase;">
  New Release | Thriller, Sci-Fi | 2024
</p>

      <p class="hero-synopsis" style="margin:0;color:#e5e7eb;
                font-size:clamp(.95rem,2.2vw,1.15rem);line-height:1.55;
                display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;
                overflow:hidden;">
        As a rogue AI network threatens global collapse, a disgraced former agent is called
        back into the field for one last, impossible mission to save humanity.
      </p>
    </div>
  </div>

  <button class="mute-btn" type="button" aria-pressed="true" onclick="toggleMute()" aria-label="Mute or unmute">🔇</button>
</section>
<!-- This wrapper div was limiting the width and causing the pink background to leak. -->
<!-- OLD: <div class="wrap wrap--flush"> -->
<section class="after-hero" aria-label="Actions">
  <!-- Use a new inner wrapper to apply max-width and centering for content -->
  <div class="content-pad content-pad--tight">
    <div class="hero-cta">
      <!-- Play Now -->
      <button type="button" class="btn btn--solid" onclick="console.log('Play trailer')">
        <svg aria-hidden="true" focusable="false" viewBox="0 0 20 20" fill="currentColor">
          <path d="M6 4l10 6-10 6V4z"/>
        </svg>
        <span>Play Now</span>
      </button>

      <!-- Details -->
      <button type="button" class="btn btn--ghost" onclick="console.log('More info')">
        <svg aria-hidden="true" focusable="false" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M13 16h-1v-4h-1m1-4h.01"/>
          <path d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
        </svg>
        <span>Details</span>
      </button>
    </div>
  </div>

  <!-- Row A moved inside after-hero -->
  <section class="shelf shelf--tight" aria-labelledby="row-a-title">
    <div class="content-pad">
      <h2 id="row-a-title" class="shelf-title">Row A</h2>
      <div class="shelf-divider" aria-hidden="true"></div>
    </div>
    <div class="shelf-outer">
      <div class="shelf-track" data-row="A" role="list" aria-label="Row A posters">
        <a class="poster" role="listitem" aria-label="A1" data-label="A1"></a>
        <a class="poster" role="listitem" aria-label="A2" data-label="A2"></a>
        <a class="poster" role="listitem" aria-label="A3" data-label="A3"></a>
        <a class="poster" role="listitem" aria-label="A4" data-label="A4"></a>
        <a class="poster" role="listitem" aria-label="A5" data-label="A5"></a>
        <a class="poster" role="listitem" aria-label="A6" data-label="A6"></a>
        <a class="poster" role="listitem" aria-label="A7" data-label="A7"></a>
        <a class="poster" role="listitem" aria-label="A8" data-label="A8"></a>
        <a class="poster" role="listitem" aria-label="A9" data-label="A9"></a>
        <a class="poster" role="listitem" aria-label="A10" data-label="A10"></a>
      </div>
    </div>
  </section>
</section>
<!-- Shelves: titles in container, cards full-bleed -->

<section class="shelf" aria-labelledby="row-b-title">
  <div class="content-pad">
    <h2 id="row-b-title" class="shelf-title">Row B</h2>
    <div class="shelf-divider" aria-hidden="true"></div>
  </div>
  <div class="shelf-outer">
    <div class="shelf-track" data-row="B" role="list" aria-label="Row B posters">
      <a class="poster" role="listitem" aria-label="B1" data-label="B1"></a>
      <a class="poster" role="listitem" aria-label="B2" data-label="B2"></a>
      <a class="poster" role="listitem" aria-label="B3" data-label="B3"></a>
      <a class="poster" role="listitem" aria-label="B4" data-label="B4"></a>
      <a class="poster" role="listitem" aria-label="B5" data-label="B5"></a>
      <a class="poster" role="listitem" aria-label="B6" data-label="B6"></a>
      <a class="poster" role="listitem" aria-label="B7" data-label="B7"></a>
      <a class="poster" role="listitem" aria-label="B8" data-label="B8"></a>
      <a class="poster" role="listitem" aria-label="B9" data-label="B9"></a>
      <a class="poster" role="listitem" aria-label="B10" data-label="B10"></a>
    </div>
  </div>
</section>

<section class="shelf" aria-labelledby="row-c-title">
  <div class="content-pad">
    <h2 id="row-c-title" class="shelf-title">Row C</h2>
    <div class="shelf-divider" aria-hidden="true"></div>
  </div>
  <div class="shelf-outer">
    <div class="shelf-track" data-row="C" role="list" aria-label="Row C posters">
      <a class="poster" role="listitem" aria-label="C1" data-label="C1"></a>
      <a class="poster" role="listitem" aria-label="C2" data-label="C2"></a>
      <a class="poster" role="listitem" aria-label="C3" data-label="C3"></a>
      <a class="poster" role="listitem" aria-label="C4" data-label="C4"></a>
      <a class="poster" role="listitem" aria-label="C5" data-label="C5"></a>
      <a class="poster" role="listitem" aria-label="C6" data-label="C6"></a>
      <a class="poster" role="listitem" aria-label="C7" data-label="C7"></a>
      <a class="poster" role="listitem" aria-label="C8" data-label="C8"></a>
      <a class="poster" role="listitem" aria-label="C9" data-label="C9"></a>
      <a class="poster" role="listitem" aria-label="C10" data-label="C10"></a>
    </div>
  </div>
</section>
<!-- OLD: </div> -->

  </main>

  <footer>© <span id="y"></span> Rawoul</footer>
  <script>document.getElementById('y').textContent = new Date().getFullYear();</script>
<script src="https://www.youtube.com/iframe_api"></script>
<script>
  // Changed alerts to console.log as alerts break the canvas environment.
  let ytPlayer, isMuted = true;
  function onYouTubeIframeAPIReady(){
    ytPlayer = new YT.Player('hero-yt', {
      events: { onReady: e => { e.target.mute(); e.target.playVideo(); } }
    });
  }
  function toggleMute(){
    if(!ytPlayer) return;
    if(isMuted){ ytPlayer.unMute(); isMuted=false; document.querySelector('.mute-btn').textContent='🔊'; document.querySelector('.mute-btn').setAttribute('aria-pressed','false'); }
    else{ ytPlayer.mute(); isMuted=true; document.querySelector('.mute-btn').textContent='🔇'; document.querySelector('.mute-btn').setAttribute('aria-pressed','true'); }
  }
</script>
<script>
  // Make the CTA row 1/3 shorter than its own available width
  (function(){
    function alignCta(){
      const cta = document.querySelector('.hero-cta');
      if(!cta || !cta.parentElement) return;

      // Use the parent’s current width as the stable base
      const base = cta.parentElement.getBoundingClientRect().width;

      // Target = 67% of that base (i.e., 1/3 shorter)
      const target = Math.round(base * 0.67);

      // Clamp to keep both pills on one line
      const clamped = Math.max(200, Math.min(target, 420));

      cta.style.width = clamped + 'px';
    }
    window.addEventListener('load', alignCta);
    window.addEventListener('resize', alignCta);
    window.addEventListener('orientationchange', alignCta);
  })();
</script>
<script>
  // Press "g" to toggle pink gap debug
  document.addEventListener('keydown', e => {
    if (e.key.toLowerCase() === 'g') document.body.classList.toggle('debug-gap');
  });
  // start disabled
  // document.body.classList.add('debug-gap');
</script>
<script>
  document.addEventListener('DOMContentLoaded', () => {
    const shelves = document.querySelectorAll('.shelf-track');
    // This creates 4 copies before and 4 after the original set.
    // Total sets = 9 (e.g., 90 cards per row), which creates a seamless infinite illusion.
    const CLONE_COUNT = 4;

    shelves.forEach(track => {
      const originalPosters = Array.from(track.children);
      const originalPosterCount = originalPosters.length;
      if (originalPosterCount === 0) return;

      // 1. CLONE POSTERS FOR THE "INFINITE" ILLUSION
      const fragmentBefore = document.createDocumentFragment();
      const fragmentAfter = document.createDocumentFragment();
      for (let i = 0; i < CLONE_COUNT; i++) {
        originalPosters.forEach(poster => {
          fragmentBefore.appendChild(poster.cloneNode(true));
          fragmentAfter.appendChild(poster.cloneNode(true));
        });
      }
      track.prepend(fragmentBefore);
      track.append(fragmentAfter);

      // 2. SET INITIAL SCROLL POSITION
      // We start the view at the beginning of the *original* set of posters.
      const initialPosterIndex = originalPosterCount * CLONE_COUNT;
      const initialPoster = track.children[initialPosterIndex];
      if (!initialPoster) return;
      
      // Calculate the correct scroll position to perfectly center the first original poster.
      const trackWidth = track.getBoundingClientRect().width;
      const posterWidth = initialPoster.getBoundingClientRect().width;
      const initialScrollLeft = initialPoster.offsetLeft - (trackWidth / 2) + (posterWidth / 2);
      track.scrollLeft = initialScrollLeft;

      // 3. USE INTERSECTION OBSERVER FOR EFFICIENTLY SCALING THE CENTERED CARD
      let activePoster = null;
      const observerCallback = (entries) => {
        entries.forEach(entry => {
          // When a poster enters the central "activation zone"...
          if (entry.isIntersecting) {
            // Un-style the previously active poster
            if (activePoster) activePoster.classList.remove('is-active');
            // Style the new active poster
            entry.target.classList.add('is-active');
            activePoster = entry.target;
          }
        });
      };
      
      // This observer's "root" is the track itself. The 'rootMargin' creates a
      // zero-width vertical line down the exact center of the track. A poster
      // only "intersects" when it crosses this line. This is far more
      // performant than using a scroll event listener.
      const observer = new IntersectionObserver(observerCallback, {
        root: track,
        rootMargin: '0px -50% 0px -50%',
        threshold: 0.5
      });

      // Tell the observer to watch every poster in the track.
      Array.from(track.children).forEach(poster => observer.observe(poster));
    });
  });
</script>
</body>
</html>
